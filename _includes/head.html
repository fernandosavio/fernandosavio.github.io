<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
  
  {% assign bg_home = site.data.backgrounds[site.background.homepage] %}
  {% assign bg_post_list = site.data.backgrounds[site.background.post-list] %}
  {% assign post_img = page.image | default: site.background.default-post %}
  {% assign bg_post = site.data.backgrounds[post_img] %}
  
  {% if bg_post %}
    {% capture image %}{{ bg_post.url }}{% endcapture %}
    {% unless image contains 'http://' or image contains 'https://' %}
      {% capture image %}{{ site.url }}/{{ image }}{% endcapture %}
    {% endunless %}
  {% endif %}

  {% if page.title %}
    <title>{{ page.title | markdownify | strip_html | strip_newlines | escape_once }} &#8211; {{ site.title }}</title>
  {% else %}
    <title>{{ site.title }}</title>
  {% endif %}
  
  {% if page.excerpt %}
    <meta name="description" content="{{ page.excerpt | markdownify | strip_html | strip_newlines | escape_once }}">
  {% else %}
    <meta name="description" content="{{ site.description }}">
  {% endif %}

  {% if page.tags %}<meta name="keywords" content="{{ page.tags | join: ', ' }}">{% endif %}
  
  <!-- Twitter Cards -->
  {% if bg_post %}
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:image" content="{{ image }}">
  {% else %}
    <meta name="twitter:card" content="summary">
    <meta name="twitter:image" content="{{ site.logo }}">
  {% endif %}
  <meta name="twitter:title" content="{% if page.title %}{{ page.title }}{% else %}{{ site.title }}{% endif %}">
  {% if page.excerpt %}<meta name="twitter:description" content="{{ page.excerpt | markdownify | strip_html | strip_newlines | escape_once }}">{% endif %}
  {% if site.twitter %}
    <meta name="twitter:site" content="@{{ site.twitter }}">
    <meta name="twitter:creator" content="@{{ site.twitter }}">
  {% endif %}

  <!-- Open Graph -->
  <meta property="fb:admins" content="100001193129005">
  <meta property="og:locale" content="{{ site.locale }}">
  <meta property="og:type" content="article">
  <meta property="og:title" content="{% if page.title %}{{ page.title }}{% else %}{{ site.title }}{% endif %}">
  {% if page.excerpt %}<meta property="og:description" content="{{ page.excerpt | markdownify | strip_html | strip_newlines | escape_once }}">{% endif %}
  <meta property="og:url" content="{{ page.url | replace:'index.html','' | prepend: site.url }}">
  <meta property="og:site_name" content="{{ site.title }}">
  <meta property="og:image" content="{{ image }}">
  <meta property="og:image:width" content="{{ bg_post.width }}">
  <meta property="og:image:height" content="{{ bg_post.height }}">
  <meta property="og:image:type" content="{{ bg_post.mime_type }}">
  {% if page.date %}
    <meta property="profile:username" content="fernandosavio" />
    <meta property="profile:first_name" content="Fernando SÃ¡vio" />
    <meta property="profile:last_name" content="Dominguez" />
    <meta property="profile:gender" content="male" />

    <meta property="article:published_time" content="{{ page.date | date_to_xmlschema }}" />
    <meta property="article:author" content="fernandosavio" />
    <meta property="article:tag" content="{{ page.tags | join: ', ' }}" />
  {% endif %}
  {% capture canonical %}{{ site.url }}{% if site.permalink contains '.html' %}{{ page.url }}{% else %}{{ page.url | remove:'index.html' | strip_slash }}{% endif %}{% endcapture %}
  <link rel="canonical" href="{{ canonical }}">
  <!-- Handheld -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">

  {% if page.is_post %}
    {% include json-ld.html %}
  {% endif %}

  <!-- Feed -->
  {% feed_meta %}
  <!-- Favicons -->
  <link rel="shortcut icon" type="image/png" href="{{ site.url }}/favicon.png" />
  <link rel="shortcut icon" href="{{ site.url }}/favicon.ico" />
  <!-- CSS -->
  <link rel="stylesheet" type="text/css" href="{{ site.url }}/assets/css/main.css">
  <link href="https://fonts.googleapis.com/css?family=Quicksand:400,700" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css?family=Anonymous+Pro:400,700" rel="stylesheet"> 
  
  <!-- Left Block Image for Posts -->
  <style type="text/css">
    #posts.inner-post-page .block-left {background: linear-gradient(rgba(0, 0, 0, 0.5), rgba(0, 0, 0, 0.5)), url({{ image }}) no-repeat;background-size: cover;}
  </style>
  
  <!-- Left Block Images for Home and Pages -->
  <style type="text/css">
    #posts .block-left {background: linear-gradient(rgba(0, 0, 0, 0.5), rgba(0, 0, 0, 0.5)), url({{ site.url }}/{{ bg_post_list.url }}) no-repeat;background-size: cover, cover;}
    .block-left {background: linear-gradient(rgba(44,45,51,0.9), rgba(44,45,51,0.9)), url({{ site.url }}/{{ bg_home.url }}) no-repeat;background-size: cover;}
  </style>
</head>
